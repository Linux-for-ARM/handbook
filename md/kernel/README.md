# Сборка ядра

Ядро Linux — основной компонент операционной системы, выступающий промежуточным звеном между оборудованием и программным обеспечением ОС.

## Общие рекомендации по сборке ядра

Первым делом нужно создать файл `.config`, содержащий параметры ядра. Для его создания можно воспользоваться следующими опциями:

- `make defconfig` — создаёт стандартный конфиг с учётом архитектуры компьютера, для которого производится сборка.
- `make oldconfig` — задаёт пользователю ряд вопросов о конфигурации ядра в текстовом режиме. Не позволяет изменить уже заданные параметры (изменение возможно после путём редактирования файла `.config` вручную).
- `make menuconfig` — настройка ядра в псевдографическом меню. Доступно разделение всяческих функций, опций и драйверов по категориям, справка по этим вещам и прочее.

После того, как вы настроили ядро, создав `.config` одним из способов, указанных ниже, рекомендуем вам сохранить созданный `.config` где-нибудь, чтобы использовать его в дальнейшем при возможных новых сборках ядра Linux.

Рекомендуем вам все ключевые компоненты ядра *встраивать* в ядро, а не компилировать в виде подключаемых *модулей*. Да и вообще рекомендуем вам оставить в конфигурации ядра (отмечено как `<*>` или `<M>`[^1]) только то, что вам действительно необходимо. Это поможет вам сэкономить место на диске (размер одних только установленных в систему модулей легко может превысить объём всей системы без них) и упростить процесс загрузки системы (поскольку не придётся заботиться о том, какие модули загружать, а какие — нет).

В случае возникновения ошибки сборки, если рядом с этой ошибкой нет подробного текста о причине её возникновения, прочитайте весь вывод `make` — иногда сообщение о причине ошибки может быть очень далеко от последнего выведенного `make` сообщения. Это особенно актуально, если вы собираете ядро в несколько потоков.

---

[^1]: `<*>` означает, что эта функция будет встроена в двоичный файл ядра, а `<M>` — что эта функция будет скомпилирована как модуль.
