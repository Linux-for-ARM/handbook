# Allwinner: Сборка U-Boot

{{#include pkgs/u-boot.md}}

```admonish warning title="Внимание"
Предполагается, что у вас уже установлены нужные переменные окружения, в частности `BL31` и, опционально, `SCP`.
```

## Настройка

{{#include u-boot.md}}

## Сборка

```bash
make CROSS_COMPILE=$LFA_TGT-
``` 

## Сохранение образа U-Boot

Скопируйте скомпилированный файл в директорию `$LFA` для удобного доступа к нему в будущем:

```bash
cp -v u-boot-sunxi-with-spl.bin $LFA/bootloader.bin
```

Команда выше верна: мы действительно копируем файл загрузчика в директорию `$LFA`, а не в `$LFA_SYS`, как это делали обычно. Дело в том, что в базовой системе этот файл не особо нужен, а в `$LFA` содержатся различные файлы: кросс-компилятор, директория с базовой ОС, а теперь там будет и файл загрузчика. В будущем в этой директории мы соберём `img.xz`-образ вашей системы. Каталог `$LFA` отлично подходит для хранения разнотиповых файлов, чего не скажешь о `$LFA_SYS`, единственное предназначение которого — хранение файлов базовой системы.

~~~admonish note title="Содержимое пакета" collapsible=true
- **Установленные файлы:** `$LFA/bootloader.bin`

### Описание компонентов

- `$LFA/bootloader.bin` — скомпилированный файл загрузчика U-Boot.
~~~
