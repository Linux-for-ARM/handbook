# Сборка базовой системы

В этой главе мы начинаем всерьёз собирать систему LFA, используя кросс-компилятор из предыдущей главы. Порядок установки пакетов в этой главе должен строго соблюдаться, чтобы ни одна программа случайно не приобрела путь, ссылающийся на кросс-компилятор. По этой же причине не собирайте пакеты параллельно друг с другом, так как сборка сразу нескольких пакетов за раз хоть и уменьшит общее время сборки LFA, но приведёт к неправильной компиляции и, как следствие, неработоспособности базовой ОС.

Если вы хотите ускорить сборку системы, то лучше использовать многопоточную сборку пакетов. Для этого добавьте к команде `make` ключ `-jN`, где `N` - число потоков вашего процессора. Например:

```bash
make -j4
```

Кроме того, чтобы каждый раз не указывать `-jN`, вы можете объявить переменную окружения `MAKEFLAGS`, содержащую эту опцию:

```bash
export MAKEFLAGS="-jN" # либо MAKEFLAGS="-j$(nproc)"
# nproc возвращает число логических процессоров ПК
```

```admonish warning title="Внимание"
Никогда не передавайте `make` опцию `-j` без числа и не задавайте такой параметр в переменной `MAKEFLAGS`. Это позволит `make` порождать бесконечные задания на сборку и вызовет проблемы со стабильностью системы, вплоть до её полного зависания.
```

Для применения внесённых в `~/.bashrc` изменений выполните команду:

```bash
source ~/.bash_profile
```
