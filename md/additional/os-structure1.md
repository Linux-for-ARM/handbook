# Строение ОС Linux. Часть 1. Обзор

## Наименование ядра, операционной системы, дистрибутивов

В данном руководстве вы могли столкнуться с несколько странными наименованиями, такими как, например, «операционные системы, использующие ядро Linux». Начинающих читателей это могло сбить с толку.

«Сердце» любой операционной системы — это её ядро, которое предоставляет базовые абстракции для взаимодействия остального программного обеспечения с железом компьютера. В качестве ядра будем использовать [Linux](https://www.kernel.org).

Однако операционная система не может состоять только лишь из одного ядра: ей требуется дополнительное ПО, предназначенное для работы с файлами, пользователями и правами доступа пользователей к файлам (если ОС многопользовательская, как в нашем случае), а также какой-либо оболочки, в которой пользователь будет запускать установленное в систему ПО и выполнять прочие действия (например, это может быть командная оболочка вроде того же BASH или графическое рабочее окружение, например, GNOME Shell).

Это системное ПО называется `coreutils`. Программы оттуда предназначены для работы с файлами (создание и удаление файлов разных типов, их копирование и перемещение), правами доступа к файлам и т.д. Существует несколько реализаций `coreutils`, среди которых наиболее известные (для Linux) — GNU Coreutils и BusyBox (последний содержит ещё кучу компонентов, среди которых, например, командная оболочка `ash` и утилиты для работы с сетью).

Каждое программное обеспечение линкуется с системной библиотекой языка С — обычно в Linux используется библиотека `glibc` (GNU C Library), однако иногда можно встретить более миниатюрную `musl`, а, например, в Android используется `bionic`.

Не забываем и про средства разработки, с помощью которых это всё программное обеспечение компилируется и устанавливается: система сборки GNU Make и набор компиляторов GNU GCC.

Обычно в операционной системе, использующей ядро Linux, используются системные компоненты от GNU: GNU Coreutils, `glibc`, `bash` и т.д. Поэтому такую операционную систему принято называть GNU/Linux.

Однако есть и системы, которые либо не используют ПО от проекта GNU вовсе, либо используют очень ограниченное число программ. Например, систему, которую вы собрали по этому руководству LFA, можно назвать «GNU/Linux» лишь с большой натяжкой: мы используем лишь GNU GCC и GNU Make для сборки системы из исходного кода, но не более. Вместо компонентов GNU мы используем BusyBox и musl.

Поэтому для того, чтобы охватывать в руководстве все системы, которые используют ядро Linux, включая дистрибутивы операционной системы GNU/Linux, но не ограничиваясь ими, мы используем термин «операционные системы, использующие ядро Linux».

## Ядро Linux

Как упоминалось ранее, ядро Linux — это «сердце» операционной системы, которое, к тому же, соответствует стандарту POSIX и распространяется под лицензией GNU GPLv2. Несмотря на *свободную* лицензию, в составе ядра есть и несвободные компоненты: как правило, это драйверы, использующие несвободные прошивки и иные составляющие.

Linux поддерживает многозадачность, виртуальную память, динамические библиотеки и прочее, что свойственно современным операционным системам. Это монолитное ядро с поддержкой динамически загружаемых модулей.

Из плюсов монолитных ядер можно отметить более прямой доступ к аппаратным средствам, а из минусов: б*о*льший размер ядра и б*о*льшее потребление оперативной памяти. Однако у Linux есть преимущество в виде поддержки *модулей*, которые мы можем в нужный момент подключить, а когда они не будут нам нужны, выгрузить их. Например, команда

```bash
modprobe qemu-nbd
```

подключит соответствующий модуль `qemu-nbd`.

## Система инициализации

Далее ядро запускает систему инициализации - программу, которая обычно располагается в `/sbin/init` и предназначена для запуска остальных системных компонентов. Система инициализации как бы приводит систему в работоспособное состояние.

Для того, чтобы запустить какой-либо компонент системы, система инициализации либо запускает специальный sh-скрипт, который содержит инструкции по запуску компонента, его остановке или перезагрузке, либо использует специальный конфигурационный файл, в котором описано тоже самое (например, в systemd именно так).

Например, в проекте LFA используется простая система инициализации из состава BusyBox. Она последовательно запускает ряд загрузочных скриптов, написанных для оболочки `ash`
