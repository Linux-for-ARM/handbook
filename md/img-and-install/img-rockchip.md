# Сборка образа для Rockchip

Данный раздел содержит инструкции по сборке загрузочного образа для плат, оснащённых Rockchip SoC.

## Создание базовых файлов

Здесь вам нужно создать ряд образов (образ с загрузчиком и образ с собранной системой), которые потом будут «объединены» в один большой образ, пригодный для записи на загрузочный носитель и дальнейшей эксплуатации.

### Создание образа с загрузчиком U-Boot

```admonish warning title="Внимание"
Обратите внимание на то, что в данном разделе предполагается, что вы запишете собранный образ на SD-карту. Тем не менее, некоторые платы с Rockchip SoC оснащены встроенной eMMC- или SPI NOR памятью, куда также можно установить загрузчик. Тем не менее, эти два варианта в руководстве не рассматриваются. Если вам нужно установить загрузчик на eMMC или SPI NOR Flash, воспользуйтесь сведениями из [**документации U-Boot**](https://docs.u-boot.org/en/latest/board/rockchip/rockchip.html).
```

Сначала создайте заголовок размером 2 Мб. Этот заголовок будет содержать скомпилированный ранее загрузчик.

```bash
dd if=/dev/zero bs=1M count=2 of=bootloader.img
```

### Запись загрузчика на SD-

Запишите скомпилированный файл загрузчика (применимо ко всем платформам Rockchip кроме rk3128, которая не использует SPL):

```bash
dd if=$LFA/bootloader.bin \
  seek=64 of=bootloader.img
```

```admonish warning title="Внимание"
Вне зависимости от SoC (Allwinner, Broadcom или Rockchip), для которого вы собирали U-Boot, он был сохранён в файл `$LFA/bootloader.bin`. Так что имя файла в аргументе `dd if=...` правильное.
```

### Создание образа с базовой ОС

{{#include create_img.md}}

## Копирование файлов

{{#include rootfs.md}}

## Создание окончательного образа

{{#include final_img.md}}
