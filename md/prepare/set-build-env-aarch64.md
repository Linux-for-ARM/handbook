# Для архитектуры AArch64

Для сборки кросс-компилятора вам нужно задать несколько переменных, которые будут зависеть от того, для какого оборудования вы хотите собрать LFA. Вам нужно выбрать триплет для целевой архитектуры, архитектуру процессора и т.д. Для выбора нужных значений пользуйтесь приведёнными на данной странице таблицами.

<!-- Если ваш целевой процессор имеет аппаратную поддержку плавающей запятой, то установите переменную `LFA_FLOAT` в значение `hard` или `softfp`. Используйте `softfp`, если в будущем вы будете использовать в собранной системе ещё и программы, скомпилированные с помощью `soft`. В противном случае используйте `hard`. Если ваш целевой процессор не поддерживает плавающую запятую, используйте в качестве значения `LFA_FLOAT` `soft`:

```bash
export LFA_FLOAT="[hard, soft или softfp]"
```

Если вы выбрали `hard` или `softfp` для `LFA_FLOAT`, то теперь вам нужно установить, какое [оборудование для работы с плавающей запятой](../additional/fpu.md) используется в целевом процессоре (согласно таблице ниже):

```bash
export LFA_FPU="одно из значений из таблицы ниже"
```

| FPU | FPU | FPU | FPU |
|-----|-----|-----|-----|
| `fpa` | `fpe2` | `fpe3` | `maverick` |
| `vfp` | `vfpv3` | `vfpv3-fp16` | `vfpv3-d16` |
| `vfpv3-d16-fp16` | `vfpv3xd` | `vfpv3xd-fp16` | `neon` |
| `neon-fp16` | `vfpv4` | `vfpv4-d16` | `fpv4-sp-d16` |
| `neon-vfpv4` | | | | |

Например, для процессоров Cortex-A53 используется VFPv4. -->

Установите триплеты для хоста и целевой машины:

```bash
export LFA_HOST=$(echo ${MACHTYPE} | sed "s/-[^-]*/-cross/")
export LFA_TGT="aarch64-linux-musleabihf"
```
<!-- 
export LFA_TGT="триплет для целевой машины"
-->

<!-- | Значение `$LFA_FLOAT` | Триплет                    |
|-----------------------|----------------------------|
| `soft` или `softfp`   | `aarch64-linux-musleabi`   |
| `hard`                | `aarch64-linux-musleabihf` | -->

Выберите архитектуру, для которой будете собирать систему:

```bash
export LFA_ARCH="архитектура"
```

| ARCH | ARCH | ARCH | ARCH |
|------|------|------|------|
| `armv8-a` | `armv8-m` | `armv8` | `armv8-r` |
| `armv8.1-a` | `armv8.1-m` | `armv8.1-r` |

Например, для процессоров Cortex-A53 `$LFA_ARCH="armv8-a"`.

Запишите эти переменные в `~/.bashrc`, чтобы не вводить их значения каждый раз после входа от имени пользователя `lfa`:

```bash
cat >> ~/.bashrc << EOF
export LFA_HOST="$LFA_HOST"
export LFA_TGT="$LFA_TGT"
export LFA_ARCH="$LFA_ARCH"
EOF
```

~~~admonish warning title="Внимание"
Далее и на протяжении всего руководства, если вы собираете систему для AArch64, то **не используйте** переменные окружения `$LFA_FLOAT` и `$LFA_FPU`, а также пропускайте при вводе команд строки, содержащие эти переменные окружения. Например, если вы собираете систему для AArch64, то скрипту `configure` не следует передавать эти аргументы:

```bash
  --with-float=$LFA_FLOAT \
  --with-fpu=$LFA_FPU
```
~~~
